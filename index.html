<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Fijnstof Grafiek</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>

<style>
body {
  font-family: Arial;
  padding: 20px;
}

/* ðŸ”½ GRAFIEK KLEINER MAKEN */
.chart-container {
  width: 900px;
  height: 300px;   /* <<< HIER bepaal je hoe laag hij is */
}

canvas {
  width: 100% !important;
  height: 100% !important;
}
</style>
</head>

<body>

<h2>Fijnstofmetingen (PM1 / PM2.5 / PM4 / PM10)</h2>

<div class="chart-container">
  <canvas id="chart"></canvas>
</div>

<button onclick="chart.resetZoom()">Reset zoom</button>

<script>
const csvData = `tijd s;pm 1.0 ug/m3;pm 2.5 ug/m3;pm 4.0 ug/m3;pm 10 ug/m3
1768573512;3.043947;3.21886;3.21886;3.218862
1768573515;3.043947;3.21886;3.21886;3.218862
1768573518;2.990567;3.162412;3.162412;3.162415
1768573521;2.999522;3.171883;3.171883;3.171885
1768573524;3.082881;3.260032;3.260032;3.260034
1768573528;3.119318;3.298562;3.298562;3.298564
1768573531;3.114115;3.29306;3.29306;3.293063
1768573534;3.10752;3.286087;3.286087;3.286089
1768573537;3.05579;3.231383;3.231383;3.231386
1768573540;3.035964;3.210419;3.210419;3.210421
1768573543;3.04517;3.220153;3.220153;3.220156
1768573546;3.094928;3.272771;3.272771;3.272773
1768573549;3.170983;3.353195;3.353195;3.353198
1768573552;3.421807;3.618433;3.618433;3.618435
1768573555;3.516869;3.718957;3.718957;3.71896
1768573558;3.537221;3.740479;3.740479;3.740482
1768573561;3.583131;3.789027;3.789027;3.78903
1768573564;3.58524;3.791257;3.791257;3.79126
1768573567;3.551701;3.755791;3.755791;3.755794
1768573570;3.514482;3.716433;3.716433;3.716436
1768573573;3.493032;3.693751;3.693751;3.693753
1768573576;3.494313;3.695106;3.695106;3.695108
1768573580;3.537329;3.740593;3.740593;3.740596
1768573583;3.54727;3.751106;3.751106;3.751108
1768573586;3.579637;3.785332;3.785332;3.785335
1768573589;3.644723;3.854158;3.854158;3.854161
1768573592;3.773607;3.990449;3.990449;3.990452
1768573595;3.870143;4.092532;4.092532;4.092535
1768573598;3.937699;4.16397;4.16397;4.163973
1768573601;3.973034;4.201335;4.201335;4.201338
1768573604;4.040137;4.272294;4.272294;4.272297
1768573607;3.939074;4.165423;4.165423;4.165426
1768573610;3.807795;4.026601;4.026601;4.026604
1768573613;3.738965;3.953816;3.953816;3.953819
1768573616;3.679868;3.891323;3.891323;3.891325
1768573620;3.61785;3.825741;3.825741;3.825743
1768573623;3.600308;3.807191;3.807191;3.807194
1768573626;3.52565;3.728243;3.728243;3.728245
1768573629;3.567773;3.772786;3.772786;3.772789
1768573632;3.647543;3.857141;3.857141;3.857144
1768573635;3.781172;3.998448;3.998448;3.998451
1768573638;3.937228;4.163471;4.163471;4.163474
1768573641;4.078811;4.31319;4.31319;4.313193
1768573644;4.035106;4.266974;4.266974;4.266977
1768573647;4.003263;4.233301;4.233301;4.233304
1768573650;3.953052;4.180205;4.180205;4.180208
1768573653;3.888833;4.112295;4.112295;4.112298
1768573656;3.86818;4.090456;4.090456;4.090459
1768573660;3.903055;4.127335;4.127335;4.127337
1768573663;3.947021;4.173827;4.173827;4.17383
1768573666;3.851314;4.07262;4.07262;4.072623
1768573669;3.871737;4.094217;4.094217;4.09422
1768573672;3.836071;4.056502;4.056502;4.056505
1768573675;3.80583;4.024523;4.024523;4.024526
1768573678;3.693773;3.906027;3.906027;3.90603
1768573681;3.557548;3.761974;3.761974;3.761976
1768573684;3.487861;3.688283;3.688283;3.688285
1768573687;3.371226;3.564946;3.564946;3.564948
1768573690;3.318622;3.509318;3.509318;3.509321
1768573693;3.408742;3.604618;3.604618;3.60462
1768573696;3.533834;3.736898;3.736898;3.736901
1768573700;3.612873;3.820478;3.820478;3.820481
1768573703;3.629137;3.837676;3.837676;3.837679
1768573706;3.585826;3.791877;3.791877;3.791879
1768573709;3.55875;3.763245;3.763245;3.763247
1768573712;3.590905;3.797248;3.797248;3.797251
1768573715;3.706459;3.919442;3.919442;3.919445
1768573718;3.751434;3.967001;3.967001;3.967004
1768573721;3.774991;3.991911;3.991911;3.991914
1768573724;3.814791;4.033999;4.033999;4.034002
1768573727;3.901883;4.126095;4.126095;4.126098
1768573730;3.952437;4.179554;4.179554;4.179557
1768573733;4.005471;4.235636;4.235636;4.235639
1768573737;4.04796;4.280566;4.280566;4.280569
1768573740;4.107324;4.343341;4.343341;4.343345
1768573743;4.087133;4.32199;4.32199;4.321993
1768573746;4.043069;4.275395;4.275395;4.275398
1768573749;4.059856;4.293146;4.293146;4.293149
1768573752;4.079468;4.313885;4.313885;4.313889
1768573755;4.165458;4.404816;4.404816;4.404819
1768573758;4.165766;4.405142;4.405142;4.405146
1768573761;4.137831;4.375602;4.375602;4.375605
1768573764;4.067366;4.301087;4.301087;4.301091
1768573767;3.98921;4.218441;4.218441;4.218444
1768573771;3.885669;4.10895;4.10895;4.108953
1768573774;3.899509;4.123585;4.123585;4.123589
1768573777;4.054919;4.287925;4.287925;4.287928
1768573780;4.327466;4.576133;4.576133;4.576136
1768573783;4.450734;4.706485;4.706485;4.706488
1768573786;4.533572;4.794083;4.794083;4.794086
1768573789;4.671716;4.940165;4.940165;4.940168
1768573792;4.846349;5.124833;5.124833;5.124836
1768573795;4.978532;5.264611;5.264611;5.264615
1768573798;5.183731;5.481602;5.481602;5.481606
1768573801;5.331213;5.637559;5.637559;5.637563
1768573804;5.313768;5.619112;5.619112;5.619116
1768573807;5.256226;5.558263;5.558263;5.558267
1768573811;5.194236;5.492711;5.492711;5.492715
1768573814;5.17678;5.474251;5.474251;5.474255
1768573817;5.119543;5.413725;5.413725;5.413729
1768573820;5.09885;5.391843;5.391843;5.391847
1768573823;5.104027;5.397318;5.397318;5.397322
1768573826;5.099475;5.392504;5.392504;5.392508
1768573829;5.087612;5.379959;5.379959;5.379963
1768573832;5.011989;5.299992;5.299992;5.299995
1768573835;4.875072;5.155207;5.155207;5.15521
1768573838;4.733115;5.005092;5.005092;5.005095
1768573841;4.642132;4.908881;4.908881;4.908885
1768573844;4.555706;4.817489;4.817489;4.817492
1768573847;4.412874;4.666449;4.666449;4.666452
1768573851;4.27271;4.518231;4.518231;4.518234
1768573854;4.211627;4.453638;4.453638;4.453641
1768573857;4.06887;4.302678;4.302678;4.30268
1768573860;4.236011;4.479424;4.479424;4.479426
1768573863;4.353551;4.603717;4.603717;4.603721
1768573866;4.393924;4.646411;4.646411;4.646414
1768573869;4.379457;4.631113;4.631113;4.631116
1768573872;4.394814;4.647351;4.647351;4.647355
1768573875;4.323428;4.571863;4.571863;4.571866
1768573878;4.344021;4.59364;4.59364;4.593644
1768573881;4.320601;4.568874;4.568874;4.568877
1768573884;4.136789;4.3745;4.3745;4.374503
1768573887;4.070635;4.304544;4.304544;4.304548
1768573891;4.132176;4.369622;4.369622;4.369625
1768573894;4.212934;4.45502;4.45502;4.455024
1768573897;4.317717;4.565824;4.565824;4.565827
1768573900;4.361398;4.612016;4.612016;4.612019
1768573903;4.427205;4.681603;4.681603;4.681607
1768573906;4.556697;4.818537;4.818537;4.81854
1768573909;4.62278;4.888417;4.888417;4.888421
1768573912;4.737347;5.009567;5.009567;5.009571
1768573915;4.710795;4.98149;4.98149;4.981493
1768573918;4.751472;5.024505;5.024505;5.024508
1768573921;4.834944;5.112772;5.112772;5.112776
1768573924;4.973438;5.259225;5.259225;5.259229
1768573927;4.952248;5.236817;5.236817;5.236821
1768573931;4.914798;5.197215;5.197215;5.197219
1768573934;4.852968;5.131832;5.131832;5.131836
1768573937;4.810823;5.087266;5.087266;5.08727
1768573940;4.609627;4.874508;4.874508;4.874511
1768573943;4.391551;4.6439;4.6439;4.643904
1768573946;4.313712;4.561589;4.561589;4.561592
1768573949;4.383101;4.634966;4.634966;4.634969
1768573952;4.343662;4.59326;4.59326;4.593263
1768573955;4.240288;4.483946;4.483946;4.483949
1768573958;4.18082;4.421061;4.421061;4.421064
1768573961;4.160718;4.399804;4.399804;4.399807
1768573964;4.184492;4.424943;4.424943;4.424947
1768573967;4.213742;4.455875;4.455875;4.455878
1768573971;4.276851;4.52261;4.52261;4.522614
1768573974;4.284057;4.53023;4.53023;4.530233
1768573977;4.193065;4.43401;4.43401;4.434013
1768573980;4.171919;4.411649;4.411649;4.411652
1768573983;4.149408;4.387844;4.387844;4.387847
1768573986;4.158468;4.397425;4.397425;4.397428
1768573989;4.252872;4.497253;4.497253;4.497256
1768573992;4.248192;4.492304;4.492304;4.492307
1768573995;4.270882;4.516298;4.516298;4.516302
1768573998;4.315056;4.56301;4.56301;4.563014
1768574001;4.248223;4.492337;4.492337;4.49234
1768574005;4.16628;4.405685;4.405685;4.405688
1768574008;4.141621;4.379609;4.379609;4.379612
1768574011;4.138018;4.3758;4.3758;4.375803
1768574014;4.189564;4.430307;4.430307;4.43031
1768574017;4.231825;4.474997;4.474997;4.474999
1768574020;4.243314;4.487146;4.487146;4.487149
1768574023;4.212409;4.454465;4.454465;4.454468
1768574026;4.189339;4.430069;4.430069;4.430073
1768574029;4.158801;4.397777;4.397777;4.397779
1768574032;4.140418;4.378337;4.378337;4.37834
1768574035;4.194705;4.435743;4.435743;4.435746
1768574038;4.222235;4.464855;4.464855;4.464859
1768574042;4.179195;4.419343;4.419343;4.419346
1768574045;4.159721;4.398749;4.398749;4.398752
1768574048;4.112206;4.348504;4.348504;4.348506
1768574051;4.155941;4.394753;4.394753;4.394756
1768574054;4.198103;4.439337;4.439337;4.43934
1768574057;4.199806;4.441138;4.441138;4.441141
1768574060;4.101449;4.337129;4.337129;4.337132
1768574063;3.99537;4.224955;4.224955;4.224957
1768574066;3.925794;4.15138;4.15138;4.151383
1768574069;3.845225;4.066181;4.066181;4.066184
1768574072;3.890085;4.11362;4.11362;4.113623
1768574075;3.855106;4.07663;4.07663;4.076633
1768574078;3.774861;3.991774;3.991774;3.991777
1768574082;3.705635;3.91857;3.91857;3.918573
1768574085;3.657462;3.867629;3.867629;3.867632
1768574088;3.684547;3.896271;3.896271;3.896273
1768574091;3.698404;3.910924;3.910924;3.910927
1768574094;3.704615;3.917492;3.917492;3.917495
1768574097;3.737089;3.951832;3.951832;3.951835
1768574100;3.803345;4.021894;4.021894;4.021897
1768574103;3.943982;4.170613;4.170613;4.170616
1768574106;4.036861;4.26883;4.26883;4.268833
1768574109;4.069769;4.303628;4.303628;4.303632
1768574112;4.116487;4.353031;4.353031;4.353034
1768574115;4.189459;4.430197;4.430197;4.4302
1768574118;4.218465;4.460869;4.460869;4.460872
1768574122;4.284221;4.530404;4.530404;4.530407
1768574125;4.354615;4.604843;4.604843;4.604846
1768574128;4.495142;4.753445;4.753445;4.753448
1768574131;4.633566;4.899823;4.899823;4.899827
1768574134;4.619041;4.884463;4.884463;4.884467
1768574137;4.62899;4.894984;4.894984;4.894988
1768574140;4.666528;4.934679;4.934679;4.934682
1768574143;4.778022;5.05258;5.05258;5.052584
1768574146;4.838465;5.116496;5.116496;5.116499
1768574149;4.825201;5.102469;5.102469;5.102473
1768574152;4.74088;5.013303;5.013303;5.013307
1768574155;4.681608;4.950625;4.950625;4.950629
1768574158;4.621634;4.887205;4.887205;4.887209
1768574161;4.62188;4.887465;4.887465;4.887468
1768574165;4.573177;4.835964;4.835964;4.835968
1768574168;4.487295;4.745147;4.745147;4.745151
1768574171;4.420408;4.674416;4.674416;4.674419
1768574174;4.341631;4.591113;4.591113;4.591116
1768574177;4.299989;4.547077;4.547077;4.547081
1768574180;4.290132;4.536654;4.536654;4.536657
1768574183;4.404449;4.657539;4.657539;4.657543
1768574186;4.418655;4.672562;4.672562;4.672565
1768574189;4.416635;4.670426;4.670426;4.670429
1768574192;4.383906;4.635817;4.635817;4.63582
1768574195;4.330453;4.579293;4.579293;4.579296
1768574198;4.352687;4.602804;4.602804;4.602808
1768574201;4.350811;4.60082;4.60082;4.600823
1768574205;4.344367;4.594005;4.594005;4.594008
1768574208;4.35143;4.601475;4.601475;4.601479
1768574211;4.326969;4.575608;4.575608;4.575611
1768574214;4.29799;4.544964;4.544964;4.544967
1768574217;4.279372;4.525276;4.525276;4.52528
1768574220;4.399027;4.651807;4.651807;4.65181
1768574223;4.465436;4.722032;4.722032;4.722035
1768574226;4.60029;4.864635;4.864635;4.864638
1768574229;4.587247;4.850842;4.850842;4.850846
1768574232;4.661267;4.929115;4.929115;4.929119
1768574235;4.804744;5.080837;5.080837;5.080841
1768574238;5.046504;5.33649;5.33649;5.336493
1768574242;5.137668;5.432892;5.432892;5.432896
1768574245;5.209024;5.508349;5.508349;5.508353
1768574248;5.127402;5.422037;5.422037;5.42204
1768574251;4.985301;5.27177;5.27177;5.271774
1768574254;4.72127;4.992566;4.992566;4.992569
1768574257;4.435497;4.690372;4.690372;4.690375
1768574260;4.160089;4.399139;4.399139;4.399142
1768574263;4.046422;4.278941;4.278941;4.278944
1768574266;4.025091;4.256384;4.256384;4.256387
1768574269;3.981574;4.210366;4.210366;4.210369
1768574272;4.017961;4.248843;4.248843;4.248846
1768574275;4.022918;4.254086;4.254086;4.254088
1768574279;4.000214;4.230077;4.230077;4.23008
1768574282;3.980857;4.209608;4.209608;4.20961
1768574285;4.010454;4.240905;4.240905;4.240908
1768574288;4.006402;4.236621;4.236621;4.236624
1768574291;3.883325;4.106471;4.106471;4.106474
1768574294;3.866456;4.088633;4.088633;4.088636
1768574297;3.891454;4.115067;4.115067;4.11507
1768574300;4.018252;4.249151;4.249151;4.249154
1768574303;4.022748;4.253906;4.253906;4.25391
1768574306;4.088097;4.32301;4.32301;4.323013
1768574309;4.110283;4.346471;4.346471;4.346474
1768574313;4.162591;4.401783;4.401783;4.401787
1768574316;4.175736;4.415685;4.415685;4.415688
1768574319;4.199137;4.44043;4.44043;4.440433
1768574322;4.208578;4.450414;4.450414;4.450417
1768574325;4.223336;4.46602;4.46602;4.466023
1768574328;4.349497;4.599431;4.599431;4.599434
1768574331;4.516985;4.776543;4.776543;4.776546
1768574334;4.685811;4.95507;4.95507;4.955073
1768574337;4.887656;5.168513;5.168513;5.168517
1768574340;4.897415;5.178833;5.178833;5.178836
1768574343;4.742168;5.014666;5.014666;5.014669
1768574346;4.549232;4.810642;4.810642;4.810646
1768574349;4.369869;4.620973;4.620973;4.620976
1768574353;4.224929;4.467704;4.467704;4.467708
1768574356;4.16213;4.401297;4.401297;4.4013
1768574359;4.090812;4.325881;4.325881;4.325884
1768574362;4.136156;4.37383;4.37383;4.373833
1768574365;4.180938;4.421186;4.421186;4.421189
1768574368;4.220736;4.463271;4.463271;4.463274
1768574371;4.279664;4.525584;4.525584;4.525587
1768574374;4.327671;4.57635;4.57635;4.576353
1768574377;4.372451;4.623704;4.623704;4.623707
1768574380;4.358699;4.609161;4.609161;4.609165
1768574383;4.317243;4.565323;4.565323;4.565326
1768574386;4.306619;4.554089;4.554089;4.554092
1768574389;4.304511;4.551859;4.551859;4.551863
1768574393;4.41378;4.667408;4.667408;4.667411
1768574396;4.483864;4.741518;4.741518;4.741521
1768574399;4.508377;4.76744;4.76744;4.767444
1768574402;4.542042;4.80304;4.80304;4.803043


`;

const lines = csvData.trim().split("\n").slice(1);

const labels = [], pm1=[], pm25=[], pm4=[], pm10=[];

/* â± starttijd */
let currentTime = new Date();
currentTime.setHours(14, 24, 0, 0);

lines.forEach(l => {
  const [, a, b, c, d] = l.split(";");

  labels.push(
    currentTime.toLocaleTimeString([], {
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit'
    })
  );

  pm1.push(+a);
  pm25.push(+b);
  pm4.push(+c);
  pm10.push(+d);

  currentTime = new Date(currentTime.getTime() + 3000);
});

/* ðŸ“Š Chart */
const chart = new Chart(document.getElementById("chart"), {
  type: "line",
  data: {
    labels,
    datasets: [
      { label:"PM1.0", data:pm1, borderColor:"red", fill:false },
      { label:"PM2.5", data:pm25, borderColor:"blue", fill:false },
      { label:"PM4.0", data:pm4, borderColor:"green", fill:false },
      { label:"PM10", data:pm10, borderColor:"orange", fill:false }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,

    plugins: {
      legend: { position:'top' },

      zoom: {
        zoom: {
          wheel: { enabled: true },
          pinch: { enabled: true },
          mode: 'x'
        },
        pan: {
          enabled: true,
          mode: 'x'
        }
      },

      tooltip: {
        mode:'index',
        intersect:false,
        callbacks:{
          label: ctx => `${ctx.dataset.label}: ${ctx.formattedValue} Âµg/mÂ³`
        }
      }
    },

    interaction:{ mode:"index", intersect:false },

    scales:{
      y:{ title:{ display:true, text:"Âµg/mÂ³"} },
      x:{ title:{ display:true, text:"Tijd"} }
    }
  }
});
</script>

</body>
</html>
